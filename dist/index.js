"use strict";(()=>{window.fsAttributes=window.fsAttributes||[];window.fsAttributes.push(["cmsfilter",async e=>{let[u]=e,{listInstance:l}=u,[y]=l.items,m=y.element,s=await x();l.clearItems();let r=s.map(c=>C(c,m));await l.addItems(r),k(),document.querySelector('[discover-element="clear-filters"]').addEventListener("click",()=>{document.querySelectorAll('[fs-cmsfilter-element="tag-remove"]').forEach(n=>{n.click()})}),u.storeFiltersData()}]);var x=async()=>{try{return(await(await fetch("https://discover-plus-server.herokuapp.com/api/v1/opportunities")).json()).allOpportunities}catch(e){return console.log(e),[]}},C=(e,u)=>{let l=u.cloneNode(!0),y=l.querySelector('[discover-element="item-wrap"]'),m=l.querySelector('[discover-element="item-image"]'),s=l.querySelector('[discover-element="item-field-category"]'),r=l.querySelector('[discover-element="item-name"]'),i=l.querySelector('[discover-element="location-type"]'),c=l.querySelector('[discover-element="amount-values"]'),n=l.querySelector('[discover-element="grade-values"]'),a=l.querySelector('[fs-cmsfilter-field="type"]'),f=l.querySelector('[fs-cmsfilter-field="field-category"]'),d=l.querySelector('[fs-cmsfilter-field="field"]'),p=l.querySelector('[fs-cmsfilter-field="age"]'),v=l.querySelector('[fs-cmsfilter-field="grade"]'),_=l.querySelector('[fs-cmsfilter-field="timetable"]'),g=l.querySelector('[fs-cmsfilter-field="location-type"]'),S=l.querySelector('[fs-cmsfilter-field="location-category"]'),E=l.querySelector('[fs-cmsfilter-field="location"]'),w=l.querySelector('[fs-cmsfilter-field="deadline"]'),q=l.querySelector('[fs-cmsfilter-field="cost"]'),b=l.querySelector('[fs-cmsfilter-field="financial-aid"]');if(y.href=`opportunity/${e.slug}`,y.addEventListener("click",o=>{o.preventDefault(),localStorage.setItem("queryParam",`${window.location.search}`),window.location.href=y.href}),m&&e.organizationImageUrl&&(m.src=e.organizationImageUrl,m.classList.remove("w-dyn-bind-empty"),m.parentElement.classList.remove("w-condition-invisible")),r&&(r.textContent=e.name),s&&e.fieldCategories?(e.fieldCategories.split(", ").sort().forEach(o=>{let t=s.cloneNode(!0);t.textContent=o.trim(),s.parentElement.append(t)}),s.style.display="none"):s&&(s.parentElement.style.display="none"),i&&e.remoteInperson?i.textContent=e.remoteInperson:i&&(i.parentElement.style.display="none"),c&&e.amount?c.textContent=e.amount:c&&(c.parentElement.style.display="none"),n&&e.gradeLevelValues?n.textContent=e.gradeLevelValues:n&&(n.parentElement.style.display="none"),a&&e.types&&(e.types.forEach(o=>{let t=a.cloneNode(!0);t.textContent=o,a.parentElement.append(t)}),a.removeAttribute("fs-cmsfilter-field")),f&&e.fieldCategories&&(e.fieldCategories.split(",").forEach(o=>{let t=f.cloneNode(!0);t.textContent=o.trim(),f.parentElement.append(t)}),f.removeAttribute("fs-cmsfilter-field")),d&&e.fields&&(e.fields.forEach(o=>{let t=d.cloneNode(!0);t.textContent=o,d.parentElement.append(t)}),d.removeAttribute("fs-cmsfilter-field")),p&&e.ageValues&&(e.ageValues.split(",").forEach(o=>{let t=p.cloneNode(!0);t.textContent=o.trim(),p.parentElement.append(t)}),p.removeAttribute("fs-cmsfilter-field")),v&&e.gradeLevelValues&&(e.gradeLevelValues.split(",").forEach(o=>{let t=v.cloneNode(!0);o.trim()==="Elementary School"?t.textContent=-1:o.trim()==="Middle School"?t.textContent=0:o.trim()==="High School"?t.textContent=1:o.trim()==="Undergraduate"?t.textContent=13:o.trim()==="Graduate"?t.textContent=14:o.trim()==="Post-Graduate"?t.textContent=15:t.textContent=parseInt(o.trim().replace(/\D/g,"")),v.parentElement.append(t)}),v.removeAttribute("fs-cmsfilter-field")),_&&e.timetable&&(e.timetable.split(",").forEach(o=>{let t=_.cloneNode(!0);t.textContent=o.trim(),_.parentElement.append(t)}),_.removeAttribute("fs-cmsfilter-field")),g&&e.remoteInperson)if(e.remoteInperson==="Remote & In-person"){let o=g.cloneNode(!0);o.textContent="Remote",g.parentElement.append(o),g.textContent="In-person"}else g.textContent=e.remoteInperson;return S&&e.locationCategory&&(e.locationCategory.forEach(o=>{let t=S.cloneNode(!0);t.textContent=o,S.parentElement.append(t)}),S.removeAttribute("fs-cmsfilter-field")),E&&e.location&&(e.location.split(",").forEach(o=>{let t=E.cloneNode(!0);t.textContent=o.trim(),E.parentElement.append(t)}),E.removeAttribute("fs-cmsfilter-field")),w&&e.applicationDeadline&&(e.applicationDeadline.split(",").forEach(o=>{let t=w.cloneNode(!0);t.textContent=o.trim(),w.parentElement.append(t)}),w.removeAttribute("fs-cmsfilter-field")),q&&e.amount&&(e.amount.split(",").forEach(o=>{let t=q.cloneNode(!0);t.textContent=o.trim(),q.parentElement.append(t)}),q.removeAttribute("fs-cmsfilter-field")),b&&(b.textContent=e.financialAid?"Financial Aid":""),l},k=()=>{let e=document.querySelectorAll('[discover-element="field-wrap"]');document.querySelectorAll('[discover-element="field-category-wrap"]').forEach(r=>{e.forEach(i=>{var c;r.querySelector(".home_filters_checkbox-label").innerHTML===i.querySelector(".home_filters_field-category").innerHTML&&(r.querySelector(".home_filters_checkbox-label").innerHTML===i.querySelector(".home_filters_checkbox-label").innerHTML&&(i.style.display="none"),(c=r.querySelector(".home_filters_fields-wrap"))==null||c.append(i))})});let l=document.querySelectorAll('[discover-element="location-wrap"]');document.querySelectorAll('[discover-element="location-category-wrap"]').forEach(r=>{l.forEach(i=>{r.querySelector(".home_filters_checkbox-label").innerHTML===i.querySelector(".home_filters_location-category").innerHTML&&r.querySelector(".home_filters_checkbox-label").innerHTML!==i.querySelector(".home_filters_checkbox-label").innerHTML&&r.querySelector(".home_filters_location-wrap").append(i)})});let m;setInterval(()=>{m=$(window).scrollTop()},500),document.addEventListener("click",function(r){r.target.type==="checkbox"&&$(window).scrollTop(m)});let s=document.querySelector('[discover-element="fields-checkboxes-wrapper"]');s==null||s.addEventListener("click",r=>{let i=r.target.closest(".home_filters_list"),c=i.scrollTop;if(r.target.classList.contains("home_filters_category-overlay")){let n=r.target.parentElement.querySelector(".home_filters_checkbox-field");n.click();let a=n.parentElement.parentElement.querySelector(".home_filters_fields-wrap").querySelectorAll(".home_filters_checkbox-field");n.classList.contains("fs-cmsfilter_active")?a.forEach(f=>{f.classList.contains("fs-cmsfilter_active")||f.click()}):a.forEach(f=>{f.classList.contains("fs-cmsfilter_active")&&f.click()})}else if(r.target.classList.contains("home_filters_child-overlay")){let n=r.target.parentElement.querySelector(".home_filters_checkbox-field"),a=n.closest(".home_filters_item-wrap").querySelector(".home_filters_category-holder").querySelector(".home_filters_checkbox-field");if(n.click(),n.classList.contains("fs-cmsfilter_active"))a.classList.contains("fs-cmsfilter_active")||a.click();else{let f=n.closest(".home_filters_fields-wrap").querySelectorAll(".home_filters_checkbox-field"),d=!0;f.forEach(p=>{p.classList.contains("fs-cmsfilter_active")&&(d=!1)}),d&&a.classList.contains("fs-cmsfilter_active")&&a.click()}}i.scrollTop=c})};})();
