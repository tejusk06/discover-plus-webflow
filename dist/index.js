"use strict";(()=>{window.fsAttributes=window.fsAttributes||[];window.fsAttributes.push(["cmsfilter",async e=>{let[p]=e,{listInstance:i}=p,[g]=i.items,d=g.element,f=await h();i.clearItems();let y=f.map(o=>k(o,d));await i.addItems(y),w(),document.querySelector('[discover-element="clear-filters"]').addEventListener("click",()=>{document.querySelectorAll('[fs-cmsfilter-element="tag-remove"]').forEach(s=>{s.click()})}),p.storeFiltersData()}]);var h=async()=>{try{return(await(await fetch("https://discover-plus-server.herokuapp.com/api/v1/opportunities")).json()).allOpportunities}catch(e){return console.log(e),[]}},k=(e,p)=>{let i=p.cloneNode(!0),g=i.querySelector('[discover-element="item-wrap"]'),d=i.querySelector('[discover-element="item-image"]'),f=i.querySelector('[discover-element="item-field-category"]'),y=i.querySelector('[discover-element="item-name"]'),u=i.querySelector('[discover-element="location-type"]'),o=i.querySelector('[discover-element="amount-values"]'),s=i.querySelector('[discover-element="grade-values"]'),a=i.querySelector('[fs-cmsfilter-field="type"]'),r=i.querySelector('[fs-cmsfilter-field="field-category"]'),n=i.querySelector('[fs-cmsfilter-field="field"]'),c=i.querySelector('[fs-cmsfilter-field="age"]'),m=i.querySelector('[fs-cmsfilter-field="grade"]'),_=i.querySelector('[fs-cmsfilter-field="timetable"]'),v=i.querySelector('[fs-cmsfilter-field="location-type"]'),S=i.querySelector('[fs-cmsfilter-field="location-category"]'),E=i.querySelector('[fs-cmsfilter-field="location"]'),q=i.querySelector('[fs-cmsfilter-field="deadline"]'),b=i.querySelector('[fs-cmsfilter-field="cost"]'),x=i.querySelector('[fs-cmsfilter-field="financial-aid"]');if(g.href=`opportunity/${e.slug}`,g.addEventListener("click",l=>{l.preventDefault(),localStorage.setItem("queryParam",`${window.location.search}`),window.location.href=g.href}),d&&e.organizationImageUrl&&(d.src=e.organizationImageUrl,d.classList.remove("w-dyn-bind-empty"),d.parentElement.classList.remove("w-condition-invisible")),y&&(y.textContent=e.name),f&&e.fieldCategories?(e.fieldCategories.split(", ").sort().forEach(l=>{let t=f.cloneNode(!0);t.textContent=l.trim(),f.parentElement.append(t)}),f.style.display="none"):f&&(f.parentElement.style.display="none"),u&&e.remoteInperson?u.textContent=e.remoteInperson:u&&(u.parentElement.style.display="none"),o&&e.amount?o.textContent=e.amount:o&&(o.parentElement.style.display="none"),s&&e.gradeLevelValues?s.textContent=e.gradeLevelValues:s&&(s.parentElement.style.display="none"),a&&e.types&&(e.types.forEach(l=>{let t=a.cloneNode(!0);t.textContent=l,a.parentElement.append(t)}),a.removeAttribute("fs-cmsfilter-field")),r&&e.fieldCategories&&(e.fieldCategories.split(",").forEach(l=>{let t=r.cloneNode(!0);t.textContent=l.trim(),r.parentElement.append(t)}),r.removeAttribute("fs-cmsfilter-field")),n&&e.fields&&(e.fields.forEach(l=>{let t=n.cloneNode(!0);t.textContent=l,n.parentElement.append(t)}),n.removeAttribute("fs-cmsfilter-field")),c&&e.ageValues&&(e.ageValues.split(",").forEach(l=>{let t=c.cloneNode(!0);t.textContent=l.trim(),c.parentElement.append(t)}),c.removeAttribute("fs-cmsfilter-field")),m&&e.gradeLevelValues&&(e.gradeLevelValues.split(",").forEach(l=>{let t=m.cloneNode(!0);l.trim()==="Elementary School"?t.textContent=-1:l.trim()==="Middle School"?t.textContent=0:l.trim()==="High School"?t.textContent=1:l.trim()==="Undergraduate"?t.textContent=13:l.trim()==="Graduate"?t.textContent=14:l.trim()==="Post-Graduate"?t.textContent=15:t.textContent=parseInt(l.trim().replace(/\D/g,"")),m.parentElement.append(t)}),m.removeAttribute("fs-cmsfilter-field")),_&&e.timetable&&(e.timetable.split(",").forEach(l=>{let t=_.cloneNode(!0);t.textContent=l.trim(),_.parentElement.append(t)}),_.removeAttribute("fs-cmsfilter-field")),v&&e.remoteInperson)if(e.remoteInperson==="Remote & In-person"){let l=v.cloneNode(!0);l.textContent="Remote",v.parentElement.append(l),v.textContent="In-person"}else v.textContent=e.remoteInperson;return S&&e.locationCategory&&(e.locationCategory.forEach(l=>{let t=S.cloneNode(!0);t.textContent=l,S.parentElement.append(t)}),S.removeAttribute("fs-cmsfilter-field")),E&&e.location&&(e.location.split(",").forEach(l=>{let t=E.cloneNode(!0);t.textContent=l.trim(),E.parentElement.append(t)}),E.removeAttribute("fs-cmsfilter-field")),q&&e.applicationDeadline&&(e.applicationDeadline.split(",").forEach(l=>{let t=q.cloneNode(!0);t.textContent=l.trim(),q.parentElement.append(t)}),q.removeAttribute("fs-cmsfilter-field")),b&&e.amount&&(e.amount.split(",").forEach(l=>{let t=b.cloneNode(!0);t.textContent=l.trim(),b.parentElement.append(t)}),b.removeAttribute("fs-cmsfilter-field")),x&&(x.textContent=e.financialAid?"Financial Aid":""),i},w=()=>{let e=document.querySelectorAll('[discover-element="field-wrap"]');document.querySelectorAll('[discover-element="field-category-wrap"]').forEach(o=>{e.forEach(s=>{var a;o.querySelector(".home_filters_checkbox-label").innerHTML===s.querySelector(".home_filters_field-category").innerHTML&&(o.querySelector(".home_filters_checkbox-label").innerHTML===s.querySelector(".home_filters_checkbox-label").innerHTML&&(s.style.display="none"),(a=o.querySelector(".home_filters_fields-wrap"))==null||a.append(s))})});let i=document.querySelectorAll('[discover-element="location-wrap"]');document.querySelectorAll('[discover-element="location-category-wrap"]').forEach(o=>{i.forEach(s=>{o.querySelector(".home_filters_checkbox-label").innerHTML===s.querySelector(".home_filters_location-category").innerHTML&&o.querySelector(".home_filters_checkbox-label").innerHTML!==s.querySelector(".home_filters_checkbox-label").innerHTML&&o.querySelector(".home_filters_location-wrap").append(s)})});let d;setInterval(()=>{d=$(window).scrollTop()},500),document.addEventListener("click",function(o){o.target.type==="checkbox"&&$(window).scrollTop(d)});let f=()=>{setTimeout(()=>{let o=[];document.querySelectorAll(".home_opp_tag-template").forEach(a=>{let r=a.querySelector(".home_opp_tag-text");o.includes(r.innerHTML)?a.style.display="none":o.push(r.innerHTML)})},100)},y=document.querySelector('[discover-element="fields-checkboxes-dropdown"]');y==null||y.addEventListener("click",o=>{let s=o.target.closest(".home_filters_list"),a=s.scrollTop;if(o.target.classList.contains("home_filters_category-overlay")){let r=o.target.parentElement.querySelector(".home_filters_checkbox-field");r.click();let n=r.parentElement.parentElement.querySelector(".home_filters_fields-wrap").querySelectorAll(".home_filters_checkbox-field");r.classList.contains("fs-cmsfilter_active")?(n.forEach(c=>{c.classList.contains("fs-cmsfilter_active")||c.click()}),f()):n.forEach(c=>{c.classList.contains("fs-cmsfilter_active")&&c.click()})}else if(o.target.classList.contains("home_filters_child-overlay")){let r=o.target.parentElement.querySelector(".home_filters_checkbox-field"),n=r.closest(".home_filters_item-wrap").querySelector(".home_filters_category-holder").querySelector(".home_filters_checkbox-field");if(r.click(),r.classList.contains("fs-cmsfilter_active"))n.classList.contains("fs-cmsfilter_active")||n.click();else{let c=r.closest(".home_filters_fields-wrap").querySelectorAll(".home_filters_checkbox-field"),m=!0;c.forEach(_=>{_.classList.contains("fs-cmsfilter_active")&&(m=!1)}),m&&n.classList.contains("fs-cmsfilter_active")&&n.click()}}s.scrollTop=a});let u=document.querySelector('[discover-element="locations-checkboxes-tab"]');u==null||u.addEventListener("click",o=>{let s=o.target.closest(".home_filters_tab-pane"),a=s.scrollTop;if(o.target.classList.contains("home_filters_category-overlay")){let r=o.target.parentElement.querySelector(".home_filters_checkbox-field");r.click();let n=r.parentElement.parentElement.querySelector(".home_filters_location-wrap").querySelectorAll(".home_filters_checkbox-field");r.classList.contains("fs-cmsfilter_active")?(n.forEach(c=>{c.classList.contains("fs-cmsfilter_active")||c.click()}),f()):n.forEach(c=>{c.classList.contains("fs-cmsfilter_active")&&c.click()})}else if(o.target.classList.contains("home_filters_child-overlay")){let r=o.target.parentElement.querySelector(".home_filters_checkbox-field"),n=r.closest(".home_filters_item-wrap").querySelector(".home_filters_category-holder").querySelector(".home_filters_checkbox-field");if(r.click(),r.classList.contains("fs-cmsfilter_active"))n.classList.contains("fs-cmsfilter_active")||n.click();else{let c=r.closest(".home_filters_location-wrap").querySelectorAll(".home_filters_checkbox-field"),m=!0;c.forEach(_=>{_.classList.contains("fs-cmsfilter_active")&&(m=!1)}),m&&n.classList.contains("fs-cmsfilter_active")&&n.click()}}s.scrollTop=a})};})();
